server {
    # Render provides $PORT. The nginx Docker image will substitute ${PORT} at startup.
    listen       ${PORT};
    server_name  _;

    root /usr/share/nginx/html;
    index index.html;

    # Required for WebContainers
    add_header Cross-Origin-Opener-Policy "same-origin" always;
    add_header Cross-Origin-Embedder-Policy "require-corp" always;

    # Single Page App fallback
    location / {
        try_files $uri /index.html;
    }
}
